openapi:                                       3.0.1
servers:
  - url:                                       'http://api-dev.neotomadb.org/'
    description:                               Neotoma development server.
  - url:                                       'http://api.neotomadb.org/'
    description:                               Neotoma production server.
info:
  title:                                       Neotoma API
  version:                                     "2.0-oas3"
  description:                                 API Documentation for the Neotoma Paleoecological Database
  termsOfService:                              'no'
  contact:
    name:                                      Simon J Goring
    email:                                     goring@wisc.edu
    url:                                       'http://goring.org'
  license:
    name:                                      MIT
    url:                                       'https://opensource.org/licenses/MIT'
tags:
  - name:                                      Database tables
    description:                               Endpoints that access tables from Neotoma verbatim.
    externalDocs:
      url:                                     http://open.neotomadb.org/schemas/#Structure
  - name:                                      Chronology metadata
    description:                               Information about chronological controls and the models used to add the temporal component to records.
  - name:                                      Contact metadata
    description:                               Information about Neotoma data contributors, authors and data analysts.
  - name:                                      Dataset metadata
    description:                               Information about site location and metadata specific to the individual dataset.
  - name:                                      Data download
    description:                               Full dataset download, including all sample data for a particular dataset.
  - name:                                      Geopolitical metadata
    description:                               Information about the geopolitical units in which a site is located.
  - name:                                      Occurrence metadata
    description:                               A simplified data return, similar to the data download, but specific to a particular taxon, time or location.
  - name:                                      Pollen proportions
    description:                               For ease of use in online applications, pre-calculated pollen percentages for taxa, location or temporal bins.
  - name:                                      Publication metadata
    description:                               Formatted publication data related to Neotoma records.
  - name:                                      Site metadata
    description:                               All metadata associated with a particular site with fossil records.
  - name:                                      Taxonomic metadata
    description:                               All available information about a particular taxon.
  - name:                                      v1.5
    description:                               All API endpoints associated with v1.5 of the Neotoma API.
    externalDocs:
      url:                                     http://github.com/NeotomaDB/api_nodetest
  - name:                                      v2.0
    description:                               All API endpoints associated with v2.0 of the Neotoma API.
    externalDocs:
      url:                                     http://github.com/NeotomaDB/api_nodetest
paths:
  /v1.5/apps/collectionTypes:
    get:
      tags:                                    ['Database tables', 'v1.5']
      summary:                                 Return the list of collection types.
      responses:
        '200':
          description:                         Definition generated from Swagger Inspector
          content:
            application/json:
              schema:
                $ref:                          '#/components/schemas/collectionTypes'
  /v1.5/apps/DatasetTypes:
    get:
      tags:                                    ['Database tables', 'v1.5']
      responses:
        '200':
          description:                         Definition generated from Swagger Inspector
          content:
            application/json:
              schema:
                $ref:                          '#/components/schemas/datasetTypes'
  /v1.5/apps/TaxaInDatasets:
    get:
      tags:                                    ['v1.5']
      summary:                                 List the taxa in datasets.
      responses:
        '200':
          description:                         Definition generated from Swagger Inspector
          content:
            application/json:
              schema:
                $ref:                          '#/components/schemas/taxaInDatasets'
  # /v1.5/data/chronology/{chronid}:
  #   get:
  #     tags:                                    ['Chronology metadata', 'v1.5']
  #     summary:                                 Chronology metadata for a dataset.
  #     description:                             >-
  #       Returns the chronology and chronological controls used for a dataset age
  #       model.
  #     parameters:
  #       - $ref:                                '#/components/parameters/chronidPath'
  #     responses:
  #       '200':
  #         description:                         Chronology
  #         content:
  #           application/json:
  #             schema:
  #               type:                          object
  #               items:
  #                 $ref:                        '#/components/schemas/chronology'
  /v1.5/data/contacts/{contactid}:
    get:
      tags:                                    ['Contact metadata', 'v1.5']
      summary:                                 Contact information for Neotoma contributors.
      description:                             Returns researcher contact information associated with a record.
      parameters:
        - name:                                contactid
          description:                         Unique contact identifier.
          in:                                  path
          required:                            true
          schema:
            type:                              integer
            format:                            int64
      responses:
        '200':
          description:                         Contact
          content:
            application/json:
              schema:
                type:                          object
                items:
                  $ref:                        '#/components/schemas/contact'
  /v1.5/data/datasets/{datasetid}:
    get:
      tags:                                    ['Dataset metadata', 'v1.5']
      summary:                                 Dataset information.
      description:                             Returns information about Neotoma dataset
      parameters:
        - $ref:                                '#/components/parameters/datasetidPath'
      responses:
        '200':
          description:                         An array of datasets.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/dataset'
  # /v1.5/data/datasets:
  #   get:
  #     tags:                                    ['Dataset metadata', 'v1.5']
  #     summary:                                 Dataset information.
  #     description:                             Returns information about Neotoma dataset
  #     parameters:
  #       - $ref:                                '#/components/parameters/datasetidQuery'
  #       - $ref:                                '#/components/parameters/siteidQuery'
  #     responses:
  #       '200':
  #         description:                         An array of datasets.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/dataset'
  /v1.5/data/downloads/{datasetid}:
    get:
      tags:                                    ['Data download', 'v1.5']
      summary:                                 Returns the named Neotoma Database table.
      description:                             Returns the named Neotoma Database table.
      parameters:
        - $ref:                                '#/components/parameters/datasetidPath'
      responses:
        '200':
          description:                         Returned download object.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/download'
  /v1.5/data/geopoliticalunits/{gpid}:
    get:
      tags:                                    ['Geopolitical metadata', 'v1.5']
      summary:                                 Returns information about geopolitical units.
      parameters:
        - name:                                gpid
          in:                                  path
          description:                         Numeric ID for the geopolitical unit.
          required:                            true
          schema:
            type:                              integer
      responses:
        '200':
          description:                         An array of geopolitical units.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/geopolitical'
  /v1.5/data/geopoliticalunits:
    get:
      tags:                                    ['Geopolitical metadata', 'v1.5']
      summary:                                 Returns information about geopolitical units.
      parameters:
        - name:                                gpid
          in:                                  query
          description:                         Numeric ID for the geopolitical unit.
          required:                            false
          schema:
            type:                              integer
        - name:                                gpname
          in:                                  query
          description:                         Name of the geopolitical unit.
          required:                            false
          schema:
            type:                              string
        - name:                                rank
          in:                                  query
          description:                         'The unit rank.  Ranges from 1 (country) - 4 (e.g., parks).'
          required:                            false
          schema:
            type:                              integer
        - name:                                lower
          in:                                  query
          description:                         Should all lower ranked units below the target unit be returned?
          required:                            false
          schema:
            type:                              boolean
      responses:
        '200':
          description:                         An array of geopolitical units.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/geopolitical'
  /v1.5/data/occurrence/{occurrenceid}:
    get:
      tags:                                    ['Occurrence metadata', 'v1.5']
      summary:                                 Occurrence information for a taxon and sample.
      description:                             >-
        Given a unique occurrence identifier associated with a unique occurrence in Neotoma, return individual occurrence information for the sample.
      parameters:
        - $ref:                                '#/components/parameters/occurrenceidPath'
      responses:
        '200':
          description:                         A single occurrence object.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/occurrence'
  # /v1.5/data/occurrence:
  #   get:
  #     tags:                                    ['Occurrence metadata', 'v1.5']
  #     summary:                                 Occurrence information for a taxon and sample.
  #     description:                             >-
  #       Given a set of query parameters, return individual occurrence
  #       information for a particular sample.
  #     parameters:
  #       - name:                                taxonname
  #         description:                         Taxon name or partial name.
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #       - $ref:                                '#/components/parameters/datasetidQuery'
  #       - $ref:                                '#/components/parameters/siteidQuery'
  #     responses:
  #       '200':
  #         description:                         A taxon or array of taxa.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/occurrence'
  # /v1.5/data/pollen/{taxonid}:
  #   get:
  #     tags:                                    ['Pollen proportions', 'v1.5']
  #     summary:                                 Pollen data from Neotoma.
  #     description:                             Returns information about pollen.
  #     parameters:
  #       - $ref:                                '#/components/parameters/taxonidPath'
  #     responses:
  #       '200':
  #         description:                         A pollen response.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/pollen'
  # /v1.5/data/pollen:
  #   get:
  #     tags:                                    ['Pollen proportions', 'v1.5']
  #     summary:                                 Pollen data from Neotoma.
  #     description:                             Returns information about pollen.
  #     parameters:
  #       - $ref:                                '#/components/parameters/taxonnameQuery'
  #       - name:                                nametype
  #         description:                         'Not sure.'
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #       - $ref:                                '#/components/parameters/taxonidQuery'
  #       - name:                                ageyoung
  #         description:                         'Most recent age, in calendar years before present.'
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              number
  #           format:                            float
  #       - name:                                ageold
  #         description:                         'Oldest age, in calendar years before present.'
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              number
  #           format:                            float
  #       - name:                                agedocontain
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              integer
  #       - name:                                coords
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              integer
  #       - name:                                bbox
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              integer
  #       - name:                                wkt
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              integer
  #       - name:                                sitename
  #         description:                         Name of site for pollen record.
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #       - $ref:                                '#/components/parameters/siteidQuery'
  #       - name:                                format
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              integer
  #       - $ref:                                '#/components/parameters/limitParam'
  #       - $ref:                                '#/components/parameters/offsetParam'
  #       - name:                                fields
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #       - name:                                vocab
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #       - name:                                occurrences
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #     responses:
  #       '200':
  #         description:                         A pollen response.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/pollen'
  # /v1.5/data/publications/{pubid}:
  #   get:
  #     tags:                                    ['Publication metadata', 'v1.5']
  #     summary:                                 Returns information about Neotoma publications
  #     description:                             Returns information about Neotoma publications
  #     parameters:
  #       - name:                                pubid
  #         description:                         Numeric ID for publications.
  #         in:                                  path
  #         required:                            true
  #         schema:
  #           type:                              integer
  #           format:                            int32
  #     responses:
  #       '200':
  #         description:                         An array of geopolitical units.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/publication'
  # /v1.5/data/publications:
  #   get:
  #     tags:                                    ['Publication metadata', 'v1.5']
  #     summary:                                 Returns information about Neotoma publications
  #     description:                             Returns information about Neotoma publications
  #     parameters:
  #       - $ref:                                '#/components/parameters/datasetidQuery'
  #     responses:
  #       '200':
  #         description:                         An array of geopolitical units.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/publication'
  /v1.5/data/sites/{siteid}:
    get:
      tags:                                    ['Site metadata', 'v1.5']
      summary:                                 Site information.
      description:                             Returns information about Neotoma publications
      parameters:
        - $ref:                                '#/components/parameters/siteidPath'
      responses:
        '200':
          description:                         An array of site elements.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/sites'
  # /v1.5/data/sites:
  #   get:
  #     tags:                                    ['Site metadata', 'v1.5']
  #     summary:                                 Site information.
  #     description:                             Returns information about Neotoma publications
  #     parameters:
  #       - $ref:                                '#/components/parameters/datasetidQuery'
  #       - $ref:                                '#/components/parameters/siteidQuery'
  #     responses:
  #       '200':
  #         description:                         An array of geopolitical units.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/sites'
  # /v1.5/data/taxa:
  #   get:
  #     tags:                                    ['Taxonomic metadata', 'v1.5']
  #     summary:                                 Taxonomic information.
  #     description:                             Returns information about a taxon and (if requested) related taxa.
  #     parameters:
  #       - $ref:                                '#/components/parameters/taxonidQuery'
  #       - name:                                taxonname
  #         description:                         Taxon name or partial name.
  #         in:                                  query
  #         required:                            false
  #         schema:
  #           type:                              string
  #       - $ref:                                '#/components/parameters/datasetidQuery'
  #       - $ref:                                '#/components/parameters/siteidQuery'
  #     responses:
  #       '200':
  #         description:                         A taxon or array of taxa.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/taxa'
  # /v1.5/dbtables/{table}:
  #   get:
  #     tags:                                    ['Database tables', 'v1.5']
  #     summary:                                 Returns the named Neotoma Database table.
  #     description:                             Returns the named Neotoma Database table.
  #     parameters:
  #       - name:                                table
  #         description:                         Neotoma database table name.
  #         in:                                  path
  #         required:                            true
  #         example:                             "geochrontypes"
  #         schema:
  #           type:                              string
  #     responses:
  #       '200':
  #         description:                         Returned table.
  #         content:
  #           application/json:
  #             schema:
  #               type:                          array
  #               items:
  #                 $ref:                        '#/components/schemas/dbtables'
# Version 2.0 Elements:
  /v2.0/apps/collectionTypes:
    get:
      tags:                                    ['Database tables', 'v2.0']
      responses:
        '200':
          description:                         A table of Neotoma collection types.
          content:
            application/json:
              schema:
                $ref:                          '#/components/schemas/collectionTypes'
  /v2.0/data/chronology/{chronid}:
    get:
      tags:                                    ['Chronology metadata', 'v2.0']
      summary:                                 Chronology metadata for a dataset.
      description:                             >-
        Returns the chronology and chronological controls used for a dataset age
        model.
      parameters:
        - $ref:                                '#/components/parameters/chronidPath'
      responses:
        '200':
          description:                         A Neotoma chronology object.
          content:
            application/json:
              schema:
                type:                          object
                items:
                  $ref:                        '#/components/schemas/chronology'
# Returning Contacts
  /v2.0/data/contacts:
    get:
      tags:                                    ['Contact metadata', 'v2.0']
      summary:                                 Contact information for Neotoma contributors.
      description:                             Returns researcher contact information associated with a record.
      parameters:
        - $ref:                                '#/components/parameters/contactidQuery'
        - $ref:                                '#/components/parameters/familyNameQuery'
        - $ref:                                '#/components/parameters/contactNameQuery'
        - $ref:                                '#/components/parameters/contactStatusQuery'
        - $ref:                                '#/components/parameters/limitParam'
        - $ref:                                '#/components/parameters/offsetParam'
      responses:
        '200':
          description:                         contact
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/contact'
  /v2.0/data/datasets/{datasetid}/contacts:
    get:
      tags:                                    ['Contact metadata', 'v2.0']
      summary:                                 Contact information for Neotoma contributors.
      description:                             Returns researcher contact information associated with a record.
      parameters:
        - $ref:                                '#/components/parameters/datasetidPath'
      responses:
        '200':
          description:                         contact
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/contact'
  /v2.0/data/sites/{siteid}/contacts:
    get:
      tags:                                    ['Contact metadata', 'v2.0']
      summary:                                 Contact information for Neotoma contributors.
      description:                             Returns researcher contact information associated with a record.
      parameters:
        - $ref:                                '#/components/parameters/siteidPath'
      responses:
        '200':
          description:                         contact
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/contact'
# Returning Datasets
  /v2.0/data/datasets:
    get:
      tags:                                    ['Dataset metadata', 'v2.0']
      summary:                                 Dataset information.
      description:                             Returns information about Neotoma dataset
      parameters:
        - $ref:                                '#/components/parameters/siteidQuery'
        - $ref:                                '#/components/parameters/contactidQuery'
        - name:                                datasettype
          description:                         >-
            Neotoma contains data for a number of dataset types (see
            /dbtables/datasettypes.  This returns a subset of data types.
          in:                                  query
          required:                            false
          schema:
            type:                              string
            example:                           pollen
        - name:                                altmin
          description:                         Minimum altitude of the dataset site location (in meters)
          in:                                  query
          required:                            false
          schema:
            type:                              integer
            format:                            int64
            example:                           200
        - name:                                altmax
          in:                                  query
          description:                         Maximum altitude of the dataset site location (in meters)
          required:                            false
          schema:
            type:                              integer
            format:                            int64
            example:                           300
        - name:                                loc
          in:                                  query
          description:                         >
            The geographic region of interest for the site, as a GeoJSON string
            or valid Well Known Text (WKT).  Assumed projection of EPSG:4376
            unless otherwise defined.
          required:                            false
          schema:
            type:                              string
            format:                            geoJSON
        - name:                                ageyoung
          in:                                  query
          description:                         >-
            Youngest age that intercepts with the dataset (in calibrated years
            before present, with 0 at 1950CE)
          required:                            false
          schema:
            type:                              integer
            format:                            int64
            example:                           -60
        - name:                                ageold
          in:                                  query
          description:                         >-
            Oldest age that intercepts with the dataset (in calibrated years
            before present, with 0 at 1950CE)
          required:                            false
          schema:
            type:                              integer
            format:                            int64
            example:                           11430
        - name:                                ageof
          in:                                  query
          description:                         >-
            Dataset age ranges must contain this age (in calibrated years before
            present, with 0 at 1950CE)
          required:                            false
          schema:
            type:                              integer
            format:                            int64
            example:                           6700
      responses:
        '200':
          description:                         An array of datasets.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/dataset'
  /v2.0/data/sites/{siteid}/datasets:
    get:
      tags:                                    ['Dataset metadata', 'v2.0']
      summary:                                 Dataset information.
      description:                             Returns information about Neotoma dataset
      parameters:
        - $ref:                                '#/components/parameters/siteidPath'
      responses:
        '200':
          description:                         An array of datasets.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/dataset'
  /v2.0/data/datasets/{datasetid}:
    get:
      tags:                                    ['Dataset metadata', 'v2.0']
      summary:                                 Dataset information.
      description:                             Returns information about Neotoma dataset
      parameters:
        - $ref:                                '#/components/parameters/datasetidPath'
      responses:
        '200':
          description:                         An array of datasets.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/dataset'
# Returning Tables
  /v2.0/data/dbtables/{table}:
    get:
      tags:                                    ['Database tables', 'v2.0']
      summary:                                 Returns the full content of a named Neotoma Database table.
      description:                             >
        Returns the named Neotoma Database table.  An empty query will return a
        list of tables.
      parameters:
        - name:                                table
          description:                         Table name.
          in:                                  path
          required:                            true
          schema:
            type:                              string
            example:                           'geochrontypes'
      responses:
        '200':
          description:                         Returned table.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/dbtables'
# Returning Full Records
  /v2.0/data/downloads/{datasetid}:
    get:
      tags:                                    ['Data download', 'v2.0']
      summary:                                 >-
        Returns the named Neotoma Database table. Currently not operational, use
        "occurrences" instead.
      description:                             Returns the named Neotoma Database table.
      parameters:
        - $ref:                                '#/components/parameters/datasetidPath'
      responses:
        '200':
          description:                         Returned download object.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/download'
# Returning Geopolitical Units
  /v2.0/data/sites/{siteid}/geopoliticalunits:
    get:
      tags:                                    ['Geopolitical metadata', 'v2.0']
      summary:                                 Returns information about geopolitical units.
      parameters:
        - $ref:                                '#/components/parameters/siteidPath'
      responses:
        '200':
          description:                         An array of geopolitical units.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/geopolitical'
  /v2.0/data/geopoliticalunits/{gpid}:
    get:
      tags:                                    ['Geopolitical metadata', 'v2.0']
      summary:                                 Returns information about geopolitical units.
      parameters:
        - name:                                gpid
          in:                                  path
          description:                         Numeric ID for the geopolitical unit.
          required:                            true
          schema:
            type:                              integer
            format:                            int32
            minimum:                           0
      responses:
        '200':
          description:                         An array of geopolitical units.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/geopolitical'
  /v2.0/data/geopoliticalunits:
    get:
      tags:                                    ['Geopolitical metadata', 'v2.0']
      summary:                                 Returns information about geopolitical units.
      parameters:
        - name:                                gpid
          in:                                  query
          description:                         Numeric ID for the geopolitical unit.
          required:                            false
          schema:
            type:                              integer
        - name:                                gpname
          in:                                  query
          description:                         Name of the geopolitical unit.
          required:                            false
          schema:
            type:                              string
        - name:                                rank
          in:                                  query
          description:                         'The unit rank.  Ranges from 1 (country) - 4 (e.g., parks).'
          required:                            false
          schema:
            type:                              integer
        - name:                                lower
          in:                                  query
          description:                         Should all lower ranked units below the target unit be returned?
          required:                            false
          schema:
            type:                              boolean
            default:                           false
      responses:
        '200':
          description:                         An array of geopolitical units.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/geopolitical'
# Returning Occurrences
  /v2.0/data/occurrences/{occid}:
    get:
      tags:                                    ['Occurrence metadata', 'v2.0']
      summary:                                 Individual occurrence records for Neotoma records.
      description:                             >-
        Returns occurrence information for a particular taxon, geographic region
        or temporal slice.
      parameters:
        - name:                                occid
          description:                         Unique occurrence identifier.
          in:                                  path
          required:                            true
          schema:
            type:                              integer
      responses:
        '200':
          description:                         occurrence
          content:
            application/json:
              schema:
                type:                          object
                items:
                  $ref:                        '#/components/schemas/occurrence'
  /v2.0/data/taxa/{taxonid}/occurrences:
    get:
      tags:                                    ['Occurrence metadata', 'v2.0']
      summary:                                 Individual occurrence records for Neotoma records.
      description:                             >-
        Returns occurrence information for a particular taxon, geographic region
        or temporal slice.
      parameters:
        - $ref:                                '#/components/parameters/taxonidPath'
      responses:
        '200':
          description:                         occurrence
          content:
            application/json:
              schema:
                type:                          object
                items:
                  $ref:                        '#/components/schemas/occurrence'
  /v2.0/data/occurrences:
    get:
      tags:                                    ['Occurrence metadata', 'v2.0']
      summary:                                 Individual occurrence records for Neotoma records.
      description:                             >-
        Returns occurrence information for a particular taxon, geographic region
        or temporal slice.
      parameters:
        - name:                                taxonname
          description:                         Name of the taxon for which occurrences are requested.
          in:                                  query
          required:                            false
          schema:
            type:                              string
        - $ref:                                '#/components/parameters/taxonidQuery'
        - $ref:                                '#/components/parameters/siteidQuery'
        - name:                                sitename
          description:                         Site name for the record.
          in:                                  query
          required:                            false
          schema:
            type:                              string
        - name:                                datasettype
          description:                         >-
            Neotoma contains data for a number of dataset types.  This returns a
            subset of data types.
          in:                                  query
          required:                            false
          schema:
            type:                              string
        - name:                                altmin
          description:                         Lower altitude boundary for occurrence searches.
          in:                                  query
          required:                            false
          schema:
            type:                              integer
            format:                            int32
        - name:                                altmax
          description:                         Upper altitude boundary for occurrence searches.
          in:                                  query
          required:                            false
          schema:
            type:                              integer
            format:                            int32
        - name:                                loc
          description:                         geoJSON string for search boundaries.
          in:                                  query
          required:                            false
          schema:
            type:                              string
        - name:                                age
          description:                         A single age for a search
          in:                                  query
          required:                            false
          schema:
            type:                              integer
        - name:                                ageyoung
          description:                         The most recent age for occurrences within a query.
          in:                                  query
          required:                            false
          schema:
            type:                              integer
            format:                            int64
        - name:                                ageold
          description:                         The oldest age for occurrences to be returned by the query.
          in:                                  query
          required:                            false
          schema:
            type:                              integer
            format:                            int64
        - $ref:                                '#/components/parameters/limitParam'
        - $ref:                                '#/components/parameters/offsetParam'
      responses:
        '200':
          description:                         occurrence
          content:
            application/json:
              schema:
                type:                          object
                items:
                  $ref:                        '#/components/schemas/occurrence'
# Returning Pollen records
#  /v2.0/data/pollen/{taxonid}:
#     get:
#       tags:                                    ['Pollen proportions', 'v2.0']
#       summary:                                 Pollen data from Neotoma.
#       description:                             Returns information about pollen.
#       parameters:
#         - $ref:                                '#/components/parameters/taxonidPath'
#       responses:
#         '200':
#           description:                         A pollen response..
#           content:
#             application/json:
#               schema:
#                 type:                          array
#                 items:
#                   $ref:                        '#/components/schemas/pollen'
#  /v2.0/data/pollen:
#     get:
#       tags:                                    ['Pollen proportions', 'v2.0']
#       summary:                                 Retrieve pollen data from Neotoma.
#       parameters:
#         - $ref:                                '#/components/parameters/taxonnameQuery'
#         - name:                                nametype
#           description:                         'Not sure.'
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              string
#         - $ref:                                '#/components/parameters/taxonidQuery'
#         - name:                                ageyoung
#           description:                         'Most recent age, in calendar years before present.'
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              number
#             format:                            float
#         - name:                                ageold
#           description:                         'Oldest age, in calendar years before present.'
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              number
#             format:                            float
#         - name:                                agedocontain
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              integer
#         - name:                                coords
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              integer
#         - name:                                bbox
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              integer
#         - name:                                wkt
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              integer
#         - name:                                sitename
#           description:                         Name of site for pollen record.
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              string
#         - $ref:                                '#/components/parameters/siteidQuery'
#         - name:                                format
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              integer
#         - $ref:                                '#/components/parameters/limitParam'
#         - $ref:                                '#/components/parameters/offsetParam'
#         - name:                                fields
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              string
#         - name:                                vocab
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              string
#         - name:                                occurrences
#           in:                                  query
#           required:                            false
#           schema:
#             type:                              string
#       responses:
#         '200':
#           description:                         A pollen response.
#           content:
#             application/json:
#               schema:
#                 type:                          array
#                 items:
#                   $ref:                        '#/components/schemas/pollen'
# Returning Publications
#  /v2.0/data/publications/{pubid}:
#     get:
#       tags:                                    ['Publication metadata', 'v2.0']
#       summary:                                 Returns information about Neotoma publications
#       description:                             Returns information about Neotoma publications
#       parameters:
#         - name:                                pubid
#           description:                         Numeric ID for publications.
#           in:                                  path
#           required:                            true
#           schema:
#             type:                              integer
#             format:                            int32
#       responses:
#         '200':
#           description:                         A list of publications.
#           content:
#             application/json:
#               schema:
#                 type:                          array
#                 items:
#                   $ref:                        '#/components/schemas/publications'
#   /v2.0/data/publications:
#     get:
#       tags:                                    ['Publication metadata', 'v2.0']
#       summary:                                 Returns information about Neotoma publications
#       description:                             Returns information about Neotoma publications
#       parameters:
#         - $ref:                                '#/components/parameters/datasetidQuery'
#         - $ref:                                '#/components/parameters/siteidQuery'
#       responses:
#         '200':
#           description:                         A list of publications.
#           content:
#             application/json:
#               schema:
#                 type:                          array
#                 items:
#                   $ref:                        '#/components/schemas/publications'
# Returning Sites
  /v2.0/data/sites/{siteid}:
    get:
      tags:                                    ['Site metadata', 'v2.0']
      summary:                                 Site information.
      description:                             Returns information about Neotoma sites.
      parameters:
        - $ref:                                '#/components/parameters/siteidPath'
      responses:
        '200':
          description:                         An array of sites.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/sites'
  /v2.0/data/sites:
    get:
      tags:                                    ['Site metadata', 'v2.0']
      summary:                                 Site information.
      description:                             Returns information about Neotoma sites
      parameters:
        - $ref:                                '#/components/parameters/siteidQuery'
        - $ref:                                '#/components/parameters/siteNameQuery'
        - $ref:                                '#/components/parameters/altMaxQuery'
        - $ref:                                '#/components/parameters/altMinQuery'
        - $ref:                                '#/components/parameters/locQuery'
      responses:
        '200':
          description:                         An array of sites.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/sites'
  /v2.0/data/geopoliticalunits/{gpid}/sites:
    get:
      tags:                                    ['Site metadata', 'v2.0']
      summary:                                 Returns information about sites based on containing geopolitical unit.
      parameters:
        - $ref:                                '#/components/parameters/gpidPath'
      responses:
        '200':
          description:                         An array of geopolitical units.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/sites'
# Returning Taxa
  /v2.0/data/taxa/{taxonid}:
    get:
      tags:                                    ['Taxonomic metadata', 'v2.0']
      summary:                                 Taxonomic information.
      description:                             Returns information about a taxon and (if requested) related taxa.
      parameters:
        - $ref:                                '#/components/parameters/taxonidPath'
      responses:
        '200':
          description:                         A taxon or array of taxa.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/taxa'
  /v2.0/data/taxa:
    get:
      tags:                                    ['Taxonomic metadata', 'v2.0']
      summary:                                 Taxonomic information.
      description:                             Returns information about a taxon and (if requested) related taxa.
      parameters:
        - $ref:                                '#/components/parameters/taxonNameQuery'
        - $ref:                                '#/components/parameters/datasetidQuery'
        - $ref:                                '#/components/parameters/siteidQuery'
      responses:
        '200':
          description:                         A taxon or array of taxa.
          content:
            application/json:
              schema:
                type:                          array
                items:
                  $ref:                        '#/components/schemas/taxa'
components:
  parameters:
    gpidPath:
      name:                                gpid
      in:                                  path
      description:                         Numeric ID for the geopolitical unit.
      required:                            true
      schema:
        type:                              integer
        format:                            int32
        minimum:                           0
    contactidQuery:
      name:                                    contactid
      description:                             >-
            Unique contact identifier within the Neotoma Database, alone or
            comma separated.
      in:                                      path
      required:                                true
      schema:
        type:                                  integer
          format:                              int64
          minimum:                             1
          example:                             44
    familyNameQuery:
      name:                                    familyname
      description:                             Full name of the the researcher (may use the % wildcard)
      in:                                      query
      required:                                false
      schema:
        type:                                  string
    contactNameQuery:
      name:                                    contactname
      description:                             Last name of the researcher (may use the % wildcard)
      in:                                      query
      required:                                false
      schema:
        type:                                  string
        example:                               Grimm, Eric Christopher
    contactStatusQuery:
      name:                                    contactstatus
      in:                                      query
      description:                             Current employment status
      required:                                false
      schema:
        type:                                  string
        enum:
          - active
          - deceased
          - defunct
          - extant
          - inactive
          - retired
          - unknown
        example:                               active
    offsetParam:
      name:                                    offset
      description:                             >-
        The offset for returned records when a limit is present.  Default is
        0.
      in:                                      query
      required:                                false
      schema:
        type:                                  integer
        format:                                int32
        default:                               0
        minimum:                               0
    limitParam:
      name:                                    limit
      description:                             'The maximum number of records to be returned, default is 25.'
      schema:
        type:                                  integer
        format:                                int32
        default:                               25
        minimum:                               1
      in:                                      query
      required:                                false
    siteidPath:
      name:                                    siteid
      description:                             Valid Neotoma site identifier (integer), either singly or in a comma separated list.
      in:                                      path
      required:                                true
      schema:
        type:                                  integer
        format:                                int32
        minimum:                               0
    siteidQuery:
      name:                                    siteid
      description:                             Valid Neotoma site identifier (integer), either singly or in a comma separated list.
      in:                                      query
      required:                                false
      schema:
        type:                                  integer
        format:                                int32
        minimum:                               0
    siteNameQuery:
      name:                                    sitename
      description:                             Name of the study site (may use the % wildcard)
      in:                                      query
      required:                                false
      schema:
        type:                                  string
        example:                               Stern Excavation Site
    occurrenceidPath:
      name:                                    occurrenceid
      description:                             Valid Neotoma occurrence identifier (integer), either singly or in a comma separated list.
      in:                                      path
      required:                                true
      schema:
        type:                                  integer
        format:                                int32
        minimum:                               0
    datasetidQuery:
      name:                                    datasetid
      description:                             Valid Neotoma dataset identifier (integer), either singly or in a comma separated list.
      in:                                      query
      required:                                false
      schema:
        type:                                  integer
        format:                                int32
        minimum:                               0
    datasetidPath:
      name:                                    datasetid
      description:                             Valid Neotoma dataset identifier (integer), either singly or in a comma separated list.
      in:                                      path
      required:                                true
      schema:
        type:                                  integer
        format:                                int32
        minimum:                               0
    taxonidPath:
      name:                                    taxonid
      description:                             >
        Unique taxonomic identifier (from the Neotoma taxon table).
      in:                                      path
      required:                                true
      schema:
        type:                                  integer
        format:                                int32
        minimum:                               0
    taxonidQuery:
      in:                                      query
      name:                                    taxonid
      required:                                false
      description:                             Unique taxonomic identifier (from the Neotoma taxon table).
      schema:
        type:                                  integer
        minimum:                               0
    taxonNameQuery:
      name:                                taxonname
      description:                         Taxon name or partial name.
      in:                                  query
      required:                            false
      schema:
        type:                              string
    chronidPath:
      name:                                    chronid
      description:                             Unique chronology identifier.
      in:                                      path
      required:                                true
      schema:
        type:                                  integer
        format:                                int64
        minimum:                               0
    taxonnameQuery:
      in:                                      query
      name:                                    taxonname
      required:                                false
      description:                             Unique taxonomic name (from the Neotoma taxon table).
      schema:
        type:                                  string
    datasetTypeQuery:
      name:                                    datasettype
      description:                             >-
            Neotoma contains data for a number of dataset types (see
            /dbtables/datasettypes.  This returns a subset of data types.
      in:                                      query
      required:                                false
      schema:
        type:                                  string
        example:                               pollen
    altMinQuery:
      name:                                    altmin
      description:                             Minimum altitude of the dataset site location (in meters)
      in:                                      query
      required:                                false
      schema:
        type:                                  integer
        format:                                int64
        example:                               200
    altMaxQuery:
      name:                                    altmax
      in:                                      query
      description:                             Maximum altitude of the dataset site location (in meters)
      required:                                false
      schema:
        type:                                  integer
        format:                                int64
        example:                               300
    locQuery:
      name:                                    loc
      in:                                      query
      description:                             >
            The geographic region of interest for the site, as a GeoJSON string
            or valid Well Known Text (WKT).  Assumed projection of EPSG:4376
            unless otherwise defined.
      required:                                false
      schema:
        type:                                  string
        format:                                geoJSON
    ageYoungQuery:
      name:                                    ageyoung
      in:                                      query
      description:                             >-
            Youngest age that intercepts with the dataset (in calibrated years
            before present, with 0 at 1950CE)
      required:                                false
      schema:
        type:                                  integer
        format:                                int64
        example:                               -60
    ageOldQuery:
      name:                                    ageold
      in:                                      query
      description:                             >-
            Oldest age that intercepts with the dataset (in calibrated years
            before present, with 0 at 1950CE)
      required:                                false
      schema:
        type:                                  integer
        format:                                int64
        example:                               11430
    ageOfQuery:
      name:                                    ageof
      in:                                      query
      description:                             >-
            Dataset age ranges must contain this age (in calibrated years before
            present, with 0 at 1950CE)
      required:                                false
      schema:
        type:                                  integer
        format:                                int64
        example:                               6700
  schemas:
    collectionTypes:
      type:                                    object
      properties:
        status:
          type:                                string
        message:
          type:                                string
        data:
          type:                                array
          items:
            type:                              object
            properties:
              colltypeid:
                type:                          integer
                example:                       8
              colltype:
                type:                          string
                example:                       "Isolated specimen"
    datasetTypes:
      type:                                    object
      properties:
        status:
          type:                                string
        message:
          type:                                string
        data:
          type:                                array
          items:
            type:                              object
            properties:
              datasettypeid:
                type:                          integer
                example:                       14
              datasettype:
                type:                          string
                example:                       "geochemistry"
    taxaInDatasets:
      type:                                    object
      properties:
        status:
          type:                                string
        message:
          type:                                string
        data:
          type:                                array
          items:
            type:                              object
            properties:
              TaxonName:
                type:                          string
              TaxonID:
                type:                          integer
              TaxonGroupID:
                type:                          string
              DatasetTypeIDs:
                type:                          array
                items:
                  type:                        integer
    chronology:
      type:                                    object
      properties:
        agetype:
          type:                                string
          example:                             "Calibrated radiocarbon years BP"
        default:
          type:                                boolean
          example:                             True
        modelType:
          type:                                string
          example:                             'linear interpolation'
        chronologyid:
          type:                                integer
          example:                             1
        chronologyName:
          type:                                string
          example:                             'NAPD 1'
        datePrepared:
          type:                                string
          format:                              date
          example:                             '2013-09-30'
        reliableagespan:
          type:                                object
          properties:
            younger:
              type:                            integer
              example:                         -30
            older:
              type:                            integer
              example:                         6490
        preparedby:
          type:                                object
          properties:
            initials:
              type:                            string
              example:                         "E.C."
            contactid:
              type:                            integer
              example:                         44
            firstname:
              type:                            string
              example:                         "Eric"
            familyname:
              type:                            string
              example:                         "Grimm"
            contactname:
              type:                            string
              example:                         Grimm, Eric Christopher
        dataset:
          type:                                object
          properties:
            datasetid:
              type:                            integer
            datasettype:
              type:                            string
        controls:
          type:                                object
          properties:
            chroncontrolid:
              type:                            integer
              example:                         5645
            depth:
              type:                            number
              example:                         0.5
            thickness:
              type:                            number
              example:                         2
            age:
              type:                            number
              example:                         -45
            controllimits:
              type:                            object
              properties:
                ageyounger:
                  type:                        number
                  example:                     -48
                ageolder:
                  type:                        number
                  example:                     -48
            controltype:
              type:                            string
              example:                         "Core top"
    contact:
      properties:
        contactid:
          type:                                integer
          format:                              int64
          example:                             123
        contactname:
          type:                                string
          example:                             Goring, Simon J
        familyname:
          type:                                string
          example:                             Goring
        firstname:
          type:                                string
          example:                             Simon
        contactstatus:
          type:                                string
          example:                             Active
        address:
          type:                                string
          example:                             '550 N Park St, Madison WI, USA'
        url:
          type:                                string
          format:                              url
          example:                             'http://goring.org'
    dataset:
      properties:
        site:
          type:                                object
          properties:
            siteid:
              type:                            integer
              format:                          int32
            sitename:
              type:                            string
            sitedescription:
              type:                            string
            sitenotes:
              type:                            string
            geography:
              type:                            string
              format:                          geoJSON
            altitude:
              type:                            integer
            collectionunitid:
              type:                            integer
            collectionunit:
              type:                            string
            handle:
              type:                            string
            unittype:
              type:                            string
        dataset:
          type:                                object
          properties:
            datasetid:
              type:                            integer
            datasettype:
              type:                            string
            datasetnotes:
              type:                            string
            database:
              type:                            string
            doi:
              type:                            string
              format:                          doi
            datasetpi:
              type:                            object
              properties:
                contactid:
                  type:                        integer
                contactname:
                  type:                        string
                familyname:
                  type:                        string
                firstname:
                  type:                        string
                initials:
                  type:                        string
    download:
      type:                                    object
      properties:
        datasetid:
          type:                                integer
        frozendata:
          type:                                object
          properties:
            chronologies:
              type:                            array
              items:
                $ref:                          '#/components/schemas/chronology'
            dataset:
              type:                            object
              items:
                $ref:                          '#/components/schemas/dataset'
            samples:
              type:                            string
    geopolitical:
      properties:
        geopoliticalid:
          example:                             757
          type:                                integer
          format:                              int32
        highergeopoliticalid:
          type:                                integer
          format:                              int32
          example:                             756
        rank:
          type:                                integer
          format:                              int32
          example:                             2
        geopoliticalunit:
          type:                                string
          example:                             Alberta
        geopoliticalname:
          type:                                string
          example:                             province
        recdatecreated:
          type:                                string
          format:                              dateTime
          example:                             '2013-09-30T21:02:51.000Z'
        recdatemodified:
          type:                                string
          format:                              dateTime
          example:                             '2013-09-30T21:02:51.000Z'
    occurrence:
      properties:
        occurrence:
          type:                                integer
          format:                              int64
        sample:
          type:                                integer
          format:                              int64
        taxon:
          type:                                object
          properties:
            taxonid:
              type:                            integer
              format:                          int64
            taxonname:
              type:                            string
        ages:
          type:                                object
          properties:
            age:
              type:                            integer
              format:                          int64
            ageolder:
              type:                            integer
              format:                          int64
            ageyounger:
              type:                            integer
              format:                          int64
        site:
          type:                                object
          properties:
            datasetid:
              type:                            integer
              format:                          int64
            siteid:
              type:                            integer
              format:                          int64
            sitename:
              type:                            string
            altitude:
              type:                            integer
            location:
              type:                            string
            datasettype:
              type:                            string
            database:
              type:                            string
    pollen:
      properties:
        TaxonName:
          type:                                string
        EcolGroups:
          type:                                array
          items:
            type:                              string
        TaxonCode:
          type:                                string
        Author:
          type:                                string
        PublicationID:
          type:                                integer
          format:                              int32
        TaxonID:
          type:                                integer
          format:                              int32
        TaxaGroupID:
          type:                                string
        HigherTaxonID:
          type:                                integer
          format:                              int32
        Extinct:
          type:                                boolean
        Notes:
          type:                                string
    publication:
      properties:
        PublicationID:
          type:                                integer
        Year:
          type:                                string
        PubType:
          type:                                string
        Authors:
          type:                                array
        Citation:
          type:                                string
    sites:
      properties:
        siteid:
          type:                                integer
          format:                              int64
          minimum: 1
        sitename:
          type:                                string
        altitude:
          type:                                integer
        geography:
          type:                                string
        sitedescription:
          type:                                string
        collectionunits:
          type:                                array
          items:
            type:                              object
            properties:
              collectionunitid:
                type:                          integer
                format:                        int64
                minimum:                           1
              collectionunit:
                type:                          string
              handle:
                type:                          string
              collectionunittype:
                type:                          string
              datasets:
                type:                          array
                items:
                  type:                        object
                  properties:
                    datasetid:
                      type:                    integer
                      format:                  int64
                      minimum: 1
                    datasettype:
                      type:                    string
    taxa:
      properties:
        taxonid:
          type:                                integer
          format:                              int32
        taxonname:
          type:                                string
        author:
          type:                                string
        ecolgroup:
          type:                                array
        highertaxonid:
          type:                                integer
          format:                              int32
        publicationid:
          type:                                integer
          format:                              int32
        status:
          type:                                boolean
    dbtables:
      type:                                    object
      properties:
        status:
          type:                                string
        data:
          type:                                array
          items:
            type:                              object
    publications:
      properties:
        PublicationID:
          type:                                integer
        Year:
          type:                                string
        PubType:
          type:                                string
        Authors:
          type:                                array
        Citation:
          type:                                string
